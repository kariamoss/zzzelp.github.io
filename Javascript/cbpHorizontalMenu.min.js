function Generation_menu_Zzzelp() {
	var menu = document.querySelector('.menu_zzzelp'),
		sous_menus = menu.querySelectorAll('.sous_menu_zzzelp'),
		categorie = '';
	for(var i=0; i<sous_menus.length; i++) {
		sous_menus[i].onclick = function(event) {
			var contenus = menu.querySelectorAll('.detail_menu'),
				ex_categorie = categorie;
			categorie = this.dataset.categorie;
			for(var j=0; j<contenus.length; j++) {
				if(ex_categorie == categorie && (event.target.parentNode.className == 'sous_menu_zzzelp' && event.target.className != 'detail_menu')) {
					console.log(event.target.parentNode.className);
					categorie = '';
					contenus[j].dataset.affiche = '0';
					contenus[j].parentNode.style.background = menu.style.background;
				}
				else if(contenus[j].parentNode.dataset.categorie == categorie) {
					contenus[j].dataset.affiche =  '1'
					var color = HEXtoRGB_menu({ compte : '#47A3DA', outils_alliance : '#42B578', outils_joueur : '#E89C5A', gestion_alliance : '#F34949', menu_connexion : '#9B59B6' }[categorie]);
					var percent = 0.1;
					var f=color.split(","),t=percent<0?0:255,p=percent<0?percent*-1:percent,R=parseInt(f[0].slice(4)),G=parseInt(f[1]),B=parseInt(f[2]);
					contenus[j].style.background = "rgb("+(Math.round((t-R)*p)+R)+","+(Math.round((t-G)*p)+G)+","+(Math.round((t-B)*p)+B)+")";
					contenus[j].parentNode.style.background = "rgb("+(Math.round((t-R)*p)+R)+","+(Math.round((t-G)*p)+G)+","+(Math.round((t-B)*p)+B)+")";
				}
				else {
					contenus[j].dataset.affiche = '0';
				}
			}
			menu.style.background = color;
			for(var j=0; j<contenus.length; j++) {
				if(contenus[j].dataset.affiche == '0') {
					contenus[j].parentNode.style.background = '';
				}
			}	
		}
	}
}

function HEXtoRGB_menu(hex, opacity) {
    var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
    return (result ? 'rgb(' + parseInt(result[1], 16) + ',' + parseInt(result[2], 16) + ',' + parseInt(result[3], 16) + ')' : '');
}		


Generation_menu_Zzzelp();
